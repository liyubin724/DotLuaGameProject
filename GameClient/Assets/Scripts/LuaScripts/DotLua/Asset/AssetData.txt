require('DotLua/Class')
require("DotLua/Callback")

AssetData =
    Class(
    function(self)
        self.assetIndex = -1
        self.address = nil
        self.progressCallback = nil
        self.completeCallback = nil
        self.userdata = nil
        self.assetHandler = nil
    end
)

function AssetData:SetData(assetIndex, assetHandler ,address, receiver, progressFunc, completeFunc,userdata)
    self.assetIndex = assetIndex
    self.address = address
    self.userdata = userdata
    self.assetHandler = assetHandler

    if progressFunc then
        self.progressCallback = Callback(receiver,progressFunc)
    end

    if completeFunc then
        self.completeCallback = Callback(receiver,completeFunc)
    end
end

function AssetData:InvokeProgress(progress)
    if self.progressCallback then
        self.progressCallback:Invoke(self.address,progress,self.userdata)
    end
end

function AssetData:InvokeComplete(uObject)
    if self.completeCallback then
        self.completeCallback:Invoke(self.address,uObject,self.userdata)
    end
end