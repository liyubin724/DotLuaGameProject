local Notification = require("DotLua/Framework/Observer/Notification")

local Facade =
    class(
    function(self, key)
        self.key = key

        self.model = nil
        self.controller = nil
        self.view = nil
        self.service = nil

        self:OnInitialized()
    end
)

function Facade:GetKey()
    return self.key
end

function Facade:OnInitialized()
    self:InitializeService()
    self:InitializeModel()
    self:InitializeController()
    self:InitializeView()
end

function Facade:InitializeModel()
end

function Facade:InitializeController()
end

function Facade:InitializeView()
end

function Facade:InitializeService()
end

function Facade:HasCommand(notificationName)
    return self.controller:HasCommand(notificationName)
end

function Facade:RegisterCommand(notificationName,commandCreatorFunc)
    self.controller:RegisterCommand(notificationName,commandCreatorFunc)
end

function Facade:RemoveCommand(notificationName)
    self.controller:RemoveCommand(notificationName)
end

function Facade:HasProxy(proxyName)
    return self.model:HasProxy(proxyName)
end

function Facade:RegisterProxy(proxy)
    self.model:RegisterProxy(proxy)
end

function Facade:RetrieveProxy(proxyName)
    return self.model:RetrieveProxy(proxyName)
end

function Facade:RemoveProxy(proxyName)
    return self.model:RemoveProxy(proxyName)
end

function Facade:HasMediator(mediatorName)
    return self.view:HasMediator(mediatorName)
end

function Facade:RegisterMediator(mediator)
    self.view:RegisterMediator(mediator)
end

function Facade:RetrieveMediator(mediatorName)
    return self.view:RetrieveMediator(mediatorName)
end

function Facade:RemoveMediator(mediatorName)
    self.view:RemoveMediator(mediatorName)
end

function Facade:SendNotification(notificationName,body,userdata)
    self:NotifyObservers(Notification(notificationName,body,userdata))
end

function Facade:NotifyObservers(notification)
    self.view:NotifyObserver(notification)
end

function Facade:DoUpdate(deltaTime)
    self.service:DoUpdate(deltaTime)
end

function Facade:DoUnscaleUpdate(deltaTime)
    self.service:DoUnscaleUpdate(deltaTime)
end

function Facade:DoLateUpdate(deltaTime)
    self.service:DoLateUpdate(deltaTime)
end

function Facade:DoFixedUpdate(deltaTime)
    self.service:DoFixedUpdate(deltaTime)
end

return Facade
