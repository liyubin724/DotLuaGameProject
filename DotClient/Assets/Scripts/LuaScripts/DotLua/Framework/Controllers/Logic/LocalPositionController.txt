local oop = require("DotLua/OOP/oop")
local ActorControllerNames = require("DotLua/Framework/Controllers/ActorControllerNames")
local Vector3 = require("DotLua/Math/Vector3")
local ActorController = require("DotLua/Framework/ActorController")

local LocalPositionController =
    oop.class(
    "LocalPositionController",
    function(self)
        self.localPosition = Vector3()
    end,
    ActorController
)

function LocalPositionController:GetLocalPosition()
    return self.localPosition
end

function LocalPositionController:GetLocalPositionXYZ()
    return self.localPosition:GetX(), self.localPosition:GetY(), self.localPosition:GetZ()
end

function LocalPositionController:SetLocalPosition(position)
    self.localPosition:Set(position.x, position.y, position.z)
    self:updatePosition()
end

function LocalPositionController:SetLocalPositionXYZ(x, y, z)
    self.localPosition:Set(x, y, z)
    self:updateLocalPosition()
end

function LocalPositionController:updateLocalPosition()
    local rootContoller = self:getController(ActorControllerNames.CONTROLLER_ROOT)
    if rootContoller then
        local rootTransform = rootContoller:GetRootTransform()
        if rootTransform then
            rootTransform.localPosition = self.localPosition:ToUEVector3()
        end
    end
end

return LocalPositionController
