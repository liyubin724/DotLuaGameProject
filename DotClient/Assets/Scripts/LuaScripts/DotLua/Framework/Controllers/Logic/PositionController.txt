local oop = require("DotLua/OOP/oop")
local ActorController = require("DotLua/Framework/ActorController")
local ActorControllerNames = require("DotLua/Framework/Controllers/ActorControllerNames")
local Vector3 = require("DotLua/Math/Vector3")

local PositionController =
    oop.class(
    "PositionController",
    function(self)
        self.position = Vector3()
    end,
    ActorController
)

function PositionController:GetPosition()
    return self.position
end

function PositionController:GetPositionXYZ()
    return self.position:GetX(), self.position:GetY(), self.position:GetZ()
end

function PositionController:SetPosition(position)
    self.position:Set(position.x, position.y, position.z)
    self:updatePosition()
end

function PositionController:SetPositionXYZ(x, y, z)
    self.position:Set(x, y, z)
    self:updatePosition()
end

function PositionController:updatePosition()
    local rootContoller = self:getController(ActorControllerNames.CONTROLLER_ROOT)
    if rootContoller then
        local rootTransform = rootContoller:GetRootTransform()
        if rootTransform then
            rootTransform.position = self.position:ToUEVector3()
        end
    end
end

return PositionController
