local oop = require("DotLua/OOP/oop")
local Component = require("DotLua/ECS/Components/Component")
local EntityIdentifyPool = require("DotLua/ECS/Entities/EntityIdentifyPool")

local tclear = table.clear
local tinsert = table.insert
local tremovevalue = table.removevalue
local tcontainsvalue = table.containsvalue

local RelateToComponent =
    oop.class(
    "DotLua.ECS.Components.Basic.RelateToComponent",
    function(self)
        self.relatedGUIDs = {}
    end,
    Component
)

function RelateToComponent:GetDepends()
    return self.relatedGUIDs
end

function RelateToComponent:Add(guid)
    if not tcontainsvalue(self.relatedGUIDs, guid) then
        tinsert(self.relatedGUIDs, guid)
    end
end

function RelateToComponent:Remove(guid)
    if not tcontainsvalue(self.relatedGUIDs, guid) then
        tremovevalue(self.relatedGUIDs, guid)
        return true
    end

    return false
end

function RelateToComponent:Has(guid)
    return tcontainsvalue(self.relatedGUIDs, guid)
end

function RelateToComponent:DoRelease()
    tclear(self.relatedGUIDs)
end

return RelateToComponent
