local oop = require("DotLua/OOP/oop")
local System = oop.using("DotLua/ECS/Systems/System")

local UpdateSystem =
    oop.class(
    "DotLua.ECS.Systems.Update.UpdateSystem",
    function(self)
        self.frequencyInTime = 0
        self.elapseDeltaTime = 0
    end,
    System
)

function UpdateSystem:GetFrequency()
    return self.frequencyInTime
end

function UpdateSystem:SetFrequency(frequency)
    self.frequencyInTime = frequency or 0
    self.elapseDeltaTime = 0
end

function UpdateSystem:onInitilize()
    self.elapseDeltaTime = 0
end

function UpdateSystem:onDestroy()
    self.elapseDeltaTime = 0
end

function UpdateSystem:DoUpdate(deltaTime, unscaleDeltaTime)
    self.elapseDeltaTime = self.elapseDeltaTime + deltaTime

    if self.elapseDeltaTime >= self.frequencyInTime then
        if self.frequencyInTime <= 0 then
            self:onTimeUpdate(self.elapseDeltaTime)
            self.elapseDeltaTime = 0
        else
            self:onTimeUpdate(self.frequencyInTime)
            self.elapseDeltaTime = self.elapseDeltaTime - self.frequencyInTime
        end
    end
end

function UpdateSystem:onTimeUpdate(deltaTime)
end

return UpdateSystem
