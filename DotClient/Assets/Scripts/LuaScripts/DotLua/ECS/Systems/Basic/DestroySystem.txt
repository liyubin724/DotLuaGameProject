local oop = require("DotLua/OOP/oop")
local GroupLateUpdateSystem = require("DotLua/ECS/Systems/Group/GroupLateUpdateSystem")
local CommonMathcers = require("DotLua/ECS/CommonMathcers")
local ESystemPriority = require("DotLua/ECS/Core/ESystemPriority")

local DestroySystem =
    oop.class(
    "DotLua.ECS.Systems.Basic.DestroySystem",
    function(self, context)
        self.priority = ESystemPriority.Highest
    end,
    GroupLateUpdateSystem
)

function DestroySystem:createGroup(context)
    return context:createGroup(CommonMathcers.HaveDestroyComponentMatcher)
end

function DestroySystem:onEntityLateUpdate(entity, deltaTime)
    self.context:ReleaseEntity(entity)
end

return DestroySystem
