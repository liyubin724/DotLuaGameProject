local oop = require("DotLua/OOP/oop")
local GroupUpdateSystem = require("DotLua/ECS/Systems/GroupUpdateSystem")
local CommonMatchers = require("DotLua/ECS/CommonMatchers")
local SystemPriorityConst = require("DotLua/ECS/Systems/SystemPriorityConst")

local DestroySystem =
    oop.class(
    "DotLua.ECS.Systems.Basic.DestroySystem",
    function(self, context)
        self.priority = SystemPriorityConst.DestroySystemPriority
    end,
    GroupUpdateSystem
)

function DestroySystem:createGroup(context)
    return context:createGroup(CommonMatchers.HaveDestroyComponentMatcher)
end

function DestroySystem:onEntityUpdate(entity, deltaTime)
    self.context:ReleaseEntity(entity)
end

return DestroySystem
