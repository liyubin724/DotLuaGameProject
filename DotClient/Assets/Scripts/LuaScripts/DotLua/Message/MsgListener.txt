local oop = require("DotLua/OOP/oop")

local MsgListener =
    oop.class(
    "DotLua.Message.MsgListener",
    function(self)
        self.name = nil
        self.receiver = nil
        self.func = nil
        self.userdata = nil
    end
)

function MsgListener:GetName()
    return self.name
end

function MsgListener:GetReceiver()
    return self.receiver
end

function MsgListener:GetFunc()
    return self.func
end

function MsgListener:GetUserdata()
    return self.userdata
end

function MsgListener:DoGet(name, receiver, func, userdata)
    self.name = name
    self.receiver = receiver
    self.func = func
    self.userdata = userdata
end

function MsgListener:Invoke(...)
    if self.func then
        if self.receiver then
            if self.userdata then
                self.func(self.receiver, self.name, self.userdata, ...)
            else
                self.func(self.receiver, self.name, ...)
            end
        else
            if self.userdata then
                self.func(self.name, self.userdata, ...)
            else
                self.func(self.name, ...)
            end
        end
    end
end

function MsgListener:OnRelease()
    self.name = nil
    self.receiver = nil
    self.func = nil
    self.userdata = nil
end

function MsgListener:EqualTo(other)
    return self.name == other.name and self.receiver == other.receiver and self.func == other.func
end

return MsgListener
